<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OS X Cleanup | Libelli</title><meta name=keywords content><meta name=description content="Developer computers often get a lot of cruft built up in non-standard places because of compiled binaries, assets, packages, and other tools that we install over time then forget about as we move onto other projects. In general, I like to reinstall my OS and wipe my disk every year or so to prevent crud from accumulating. As an interemediate step, this post compiles several maintenance caommands that I run fairly routinely."><meta name=author content="Benjamin Bengfort"><link rel=canonical href=https://bbengfort.github.io/2020/11/mac-cleanup/><link crossorigin=anonymous href=/assets/css/stylesheet.min.2d6dbfc6e0f8a1db1c9d082a76dc11d094328cf63f247bbc2421dfaa7f2bb170.css integrity="sha256-LW2/xuD4odscnQgqdtwR0JQyjPY/JHu8JCHfqn8rsXA=" rel="preload stylesheet" as=style><link rel=preload href=/icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bbengfort.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bbengfort.github.io/icon.png><link rel=icon type=image/png sizes=32x32 href=https://bbengfort.github.io/icon.png><link rel=apple-touch-icon href=https://bbengfort.github.io/apple-touch-icon-precomposed.png><link rel=mask-icon href=https://bbengfort.github.io/icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.110.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-8096804-11","auto"),ga("send","pageview"))</script><meta property="og:title" content="OS X Cleanup"><meta property="og:description" content="Developer computers often get a lot of cruft built up in non-standard places because of compiled binaries, assets, packages, and other tools that we install over time then forget about as we move onto other projects. In general, I like to reinstall my OS and wipe my disk every year or so to prevent crud from accumulating. As an interemediate step, this post compiles several maintenance caommands that I run fairly routinely."><meta property="og:type" content="article"><meta property="og:url" content="https://bbengfort.github.io/2020/11/mac-cleanup/"><meta property="og:image" content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-24T14:26:25+00:00"><meta property="article:modified_time" content="2020-11-24T14:26:25+00:00"><meta property="og:site_name" content="Libelli"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="OS X Cleanup"><meta name=twitter:description content="Developer computers often get a lot of cruft built up in non-standard places because of compiled binaries, assets, packages, and other tools that we install over time then forget about as we move onto other projects. In general, I like to reinstall my OS and wipe my disk every year or so to prevent crud from accumulating. As an interemediate step, this post compiles several maintenance caommands that I run fairly routinely."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://bbengfort.github.io/posts/"},{"@type":"ListItem","position":3,"name":"OS X Cleanup","item":"https://bbengfort.github.io/2020/11/mac-cleanup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OS X Cleanup","name":"OS X Cleanup","description":"Developer computers often get a lot of cruft built up in non-standard places because of compiled binaries, assets, packages, and other tools that we install over time then forget about as we move onto other projects. In general, I like to reinstall my OS and wipe my disk every year or so to prevent crud from accumulating. As an interemediate step, this post compiles several maintenance caommands that I run fairly routinely.","keywords":[],"articleBody":"Developer computers often get a lot of cruft built up in non-standard places because of compiled binaries, assets, packages, and other tools that we install over time then forget about as we move onto other projects. In general, I like to reinstall my OS and wipe my disk every year or so to prevent crud from accumulating. As an interemediate step, this post compiles several maintenance caommands that I run fairly routinely.\nHomebrew Update homebrew and remove old formulae and their folders often, otherwise it’s going to take a long time to run if you forget about it!\n$ brew update $ brew upgrade $ brew cleanup Linking and casks are also often problems, run brew doctor to inspect the warnings and take care of anything that needs cleaning up. Note that I usually run update and upgrade multiple times to make sure everything was correctly grabbed.\nFinally, a routine brew list will show what has been installed; although it’s tough to figure out dependencies from brew, if I recognize something that I installed and am not using anymore, I usually uninstall it.\nDocker I fairly routinely clean up docker containers, images, volumes, networks, etc. from my machine since I don’t generally rely on a local build process except for testing.\n$ docker system prune --all Python I manage my Python system and environments with pyenv, which means it’s easy to build up a cruft of old environments and duplicate copies of Python packages. Using pyenv versions, list your environments and versions routinely and then use either pyenv uninstall to remove a version of Python or pyenv virtualenv-delete to remove a virtual environment.\nRuby I don’t use Ruby very much, but similar to Python I have rbenv for a few projects that require Ruby components. Use rbenv versions to list Ruby installs and then rbenv uninstall to remove the environments.\nAlso routinely run:\n$ gem cleanup --dryrun $ gem cleanup To clean up old versions of gems.\nNode Modules Node and npm download a lot of packages into project directories. The following command searches for any node_modules directories that are older than 4 months.\n$ find . -name \"node_modules\" -mtime +120 -type d Clean them up as follows:\nfind . -name \"node_modules\" -mtime +120 -type d | xargs rm -rf I usually run this in my workspaces directory before I engage in any web development.\nGit I usually do a pretty good job deleting branches that have been merged from my local computer, but ocassionally I’ll clone a repository and do a fetch that pulls down a bunch of branches. The following command says what branches have been merged:\n$ get branch --merged main The issue with this is that we normally squash and merge our branches, so this may not catch the branches you’re looking for. However, thinking about how many git objects are on your system is important!\n","wordCount":"480","inLanguage":"en","datePublished":"2020-11-24T14:26:25Z","dateModified":"2020-11-24T14:26:25Z","author":{"@type":"Person","name":"Benjamin Bengfort"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bbengfort.github.io/2020/11/mac-cleanup/"},"publisher":{"@type":"Organization","name":"Libelli","logo":{"@type":"ImageObject","url":"https://bbengfort.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://bbengfort.github.io accesskey=h title="Libelli (Alt + H)"><img src=/icon.png alt=logo aria-label=logo height=35>Libelli</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://bbengfort.github.io/archive/ title=archive><span>archive</span></a></li><li><a href=https://bbengfort.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bbengfort.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://bbengfort.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>OS X Cleanup</h1><div class=post-meta>November 24, 2020&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Benjamin Bengfort</div></header><div class=post-content><p>Developer computers often get a lot of cruft built up in non-standard places because of compiled binaries, assets, packages, and other tools that we install over time then forget about as we move onto other projects. In general, I like to reinstall my OS and wipe my disk every year or so to prevent crud from accumulating. As an interemediate step, this post compiles several maintenance caommands that I run fairly routinely.</p><h2 id=homebrew>Homebrew<a hidden class=anchor aria-hidden=true href=#homebrew>#</a></h2><p>Update homebrew and remove old formulae and their folders often, otherwise it&rsquo;s going to take a long time to run if you forget about it!</p><pre tabindex=0><code>$ brew update
$ brew upgrade
$ brew cleanup
</code></pre><p>Linking and casks are also often problems, run <code>brew doctor</code> to inspect the warnings and take care of anything that needs cleaning up. Note that I usually run update and upgrade multiple times to make sure everything was correctly grabbed.</p><p>Finally, a routine <code>brew list</code> will show what has been installed; although it&rsquo;s tough to figure out dependencies from brew, if I recognize something that I installed and am not using anymore, I usually uninstall it.</p><h2 id=docker>Docker<a hidden class=anchor aria-hidden=true href=#docker>#</a></h2><p>I fairly routinely clean up docker containers, images, volumes, networks, etc. from my machine since I don&rsquo;t generally rely on a local build process except for testing.</p><pre tabindex=0><code>$ docker system prune --all
</code></pre><h2 id=python>Python<a hidden class=anchor aria-hidden=true href=#python>#</a></h2><p>I manage my Python system and environments with <code>pyenv</code>, which means it&rsquo;s easy to build up a cruft of old environments and duplicate copies of Python packages. Using <code>pyenv versions</code>, list your environments and versions routinely and then use either <code>pyenv uninstall</code> to remove a version of Python or <code>pyenv virtualenv-delete</code> to remove a virtual environment.</p><h2 id=ruby>Ruby<a hidden class=anchor aria-hidden=true href=#ruby>#</a></h2><p>I don&rsquo;t use Ruby very much, but similar to Python I have <code>rbenv</code> for a few projects that require Ruby components. Use <code>rbenv versions</code> to list Ruby installs and then <code>rbenv uninstall</code> to remove the environments.</p><p>Also routinely run:</p><pre tabindex=0><code>$ gem cleanup --dryrun
$ gem cleanup
</code></pre><p>To clean up old versions of gems.</p><h2 id=node-modules>Node Modules<a hidden class=anchor aria-hidden=true href=#node-modules>#</a></h2><p>Node and <code>npm</code> download a lot of packages into project directories. The following command searches for any <code>node_modules</code> directories that are older than 4 months.</p><pre tabindex=0><code>$ find . -name &#34;node_modules&#34; -mtime +120 -type d
</code></pre><p>Clean them up as follows:</p><pre tabindex=0><code>find . -name &#34;node_modules&#34; -mtime +120 -type d | xargs rm -rf
</code></pre><p>I usually run this in my workspaces directory before I engage in any web development.</p><h2 id=git>Git<a hidden class=anchor aria-hidden=true href=#git>#</a></h2><p>I usually do a pretty good job deleting branches that have been merged from my local computer, but ocassionally I&rsquo;ll clone a repository and do a fetch that pulls down a bunch of branches. The following command says what branches have been merged:</p><pre tabindex=0><code>$ get branch --merged main
</code></pre><p>The issue with this is that we normally squash and merge our branches, so this may not catch the branches you&rsquo;re looking for. However, thinking about how many git objects are on your system is important!</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bbengfort.github.io>Libelli</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>