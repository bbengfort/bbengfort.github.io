<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Visualizing Pi with matplotlib | Libelli</title><meta name=keywords content><meta name=description content="Happy Pi day! As is the tradition at the University of Maryland (and to a certain extent, in my family) we are celebrating March 14 with pie and Pi. A shoutout to @konstantinosx who, during last year&rsquo;s Pi day, requested blueberry pie, which was the strangest pie request I&rsquo;ve received for Pi day. Not that blueberry pie is strange, just that someone would want one so badly for Pi day (he got a mixed berry pie)."><meta name=author content="Benjamin Bengfort"><link rel=canonical href=https://bbengfort.github.io/2016/03/pi-day/><link crossorigin=anonymous href=/assets/css/stylesheet.min.2d6dbfc6e0f8a1db1c9d082a76dc11d094328cf63f247bbc2421dfaa7f2bb170.css integrity="sha256-LW2/xuD4odscnQgqdtwR0JQyjPY/JHu8JCHfqn8rsXA=" rel="preload stylesheet" as=style><link rel=preload href=/icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bbengfort.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bbengfort.github.io/icon.png><link rel=icon type=image/png sizes=32x32 href=https://bbengfort.github.io/icon.png><link rel=apple-touch-icon href=https://bbengfort.github.io/apple-touch-icon-precomposed.png><link rel=mask-icon href=https://bbengfort.github.io/icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.105.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-8096804-11","auto"),ga("send","pageview"))</script><meta property="og:title" content="Visualizing Pi with matplotlib"><meta property="og:description" content="Happy Pi day! As is the tradition at the University of Maryland (and to a certain extent, in my family) we are celebrating March 14 with pie and Pi. A shoutout to @konstantinosx who, during last year&rsquo;s Pi day, requested blueberry pie, which was the strangest pie request I&rsquo;ve received for Pi day. Not that blueberry pie is strange, just that someone would want one so badly for Pi day (he got a mixed berry pie)."><meta property="og:type" content="article"><meta property="og:url" content="https://bbengfort.github.io/2016/03/pi-day/"><meta property="og:image" content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-03-14T10:56:57+00:00"><meta property="article:modified_time" content="2016-03-14T10:56:57+00:00"><meta property="og:site_name" content="Libelli"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Visualizing Pi with matplotlib"><meta name=twitter:description content="Happy Pi day! As is the tradition at the University of Maryland (and to a certain extent, in my family) we are celebrating March 14 with pie and Pi. A shoutout to @konstantinosx who, during last year&rsquo;s Pi day, requested blueberry pie, which was the strangest pie request I&rsquo;ve received for Pi day. Not that blueberry pie is strange, just that someone would want one so badly for Pi day (he got a mixed berry pie)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://bbengfort.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Visualizing Pi with matplotlib","item":"https://bbengfort.github.io/2016/03/pi-day/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Visualizing Pi with matplotlib","name":"Visualizing Pi with matplotlib","description":"Happy Pi day! As is the tradition at the University of Maryland (and to a certain extent, in my family) we are celebrating March 14 with pie and Pi. A shoutout to @konstantinosx who, during last year\u0026rsquo;s Pi day, requested blueberry pie, which was the strangest pie request I\u0026rsquo;ve received for Pi day. Not that blueberry pie is strange, just that someone would want one so badly for Pi day (he got a mixed berry pie).","keywords":[],"articleBody":"Happy Pi day! As is the tradition at the University of Maryland (and to a certain extent, in my family) we are celebrating March 14 with pie and Pi. A shoutout to @konstantinosx who, during last year’s Pi day, requested blueberry pie, which was the strangest pie request I’ve received for Pi day. Not that blueberry pie is strange, just that someone would want one so badly for Pi day (he got a mixed berry pie).\nIn honor of Pi day, I’ve created a simple a grid visualization of the digits of Pi, computed using the Chudnovsky algorithm with Python. The grid is displayed using some simple matplotlib code (yes, this is what “simple” matplotlib code looks like). This unfortunately took a bit longer than expected (see updates below), but in the end, I ended up with the following visualizations for 1024, 5625, and 10000 digits of Pi:\nUPDATE 0: 1,024 digits took 16.052 seconds, even though 10,000 and 5,625 digits went into “Python not responding” mode after 3-4 minutes. Noticed no significant memory or CPU usage. Going to just let the 5k digits run for now.\nUPDATE 1: 5,625 digits took 3053.405 seconds (about 51 minutes) on my Macbook Pro. (10k digits running now).\nUPDATE 2: 10,000 digits took 18661.043 seconds (5 hours, 11 minutes), all the digits printed out, but the visualization caught a SEGFAULT. Seriously, matplotlib? Anyway, a quick copy and paste of the digits saved the viz!\nThe Python script that does the work of generating both Pi and the grid are as follows:\nThe Pi digits computation uses the decimal.Decimal data structure in Python as well as setting a context to ensure that we lose no information by overflowing a float or a double precision data type. This code isn’t my own, see the Stack Overflow link in the comment for more on it.\nThe visualization is done using the matshow function in matplotlib, which I’ve used in the past to visualize cellular automata and even animate them with matplotlib. It simply assigns a color from the color map to each digit and fills in the appropriate square. I don’t like the color map — but I didn’t take the time to put together a categorical colormap with a better scheme (sorry).\nAppendix: SEGFAULT So this happened after 5 hours of computing Pi:\nAppendix: Compute Times Compute times were as follows:\ndigits time (sec) accuracy 1024 16.052 TBD 5625 3053.405 TBD 10000 18661.043 TBD ","wordCount":"409","inLanguage":"en","datePublished":"2016-03-14T10:56:57Z","dateModified":"2016-03-14T10:56:57Z","author":{"@type":"Person","name":"Benjamin Bengfort"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bbengfort.github.io/2016/03/pi-day/"},"publisher":{"@type":"Organization","name":"Libelli","logo":{"@type":"ImageObject","url":"https://bbengfort.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://bbengfort.github.io accesskey=h title="Libelli (Alt + H)"><img src=/icon.png alt=logo aria-label=logo height=35>Libelli</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://bbengfort.github.io/archive/ title=archive><span>archive</span></a></li><li><a href=https://bbengfort.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bbengfort.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://bbengfort.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Visualizing Pi with matplotlib</h1><div class=post-meta>March 14, 2016&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Benjamin Bengfort</div></header><div class=post-content><p>Happy Pi day! As is the tradition at the University of Maryland (and to a certain extent, in my family) we are celebrating March 14 with pie and Pi. A shoutout to <a href=https://github.com/konstantinosx/>@konstantinosx</a> who, during last year&rsquo;s Pi day, requested blueberry pie, which was the strangest pie request I&rsquo;ve received for Pi day. Not that blueberry pie is strange, just that someone would want one so badly for Pi day (he got a mixed berry pie).</p><p>In honor of Pi day, I&rsquo;ve created a simple a grid visualization of the digits of Pi, computed using the <a href=https://en.wikipedia.org/wiki/Chudnovsky_algorithm>Chudnovsky algorithm</a> with Python. The grid is displayed using some simple matplotlib code (yes, this is what &ldquo;simple&rdquo; matplotlib code looks like). This unfortunately took a bit longer than expected (see updates below), but in the end, I ended up with the following visualizations for 1024, 5625, and 10000 digits of Pi:</p><p><img loading=lazy src=/images/2016-03-14-pi-grid.png alt="Grid visualization of the digits of Pi"></p><ul><li><p><strong>UPDATE 0</strong>: 1,024 digits took 16.052 seconds, even though 10,000 and 5,625 digits went into &ldquo;Python not responding&rdquo; mode after 3-4 minutes. Noticed no significant memory or CPU usage. Going to just let the 5k digits run for now.</p></li><li><p><strong>UPDATE 1</strong>: 5,625 digits took 3053.405 seconds (about 51 minutes) on my Macbook Pro. (10k digits running now).</p></li><li><p><strong>UPDATE 2</strong>: 10,000 digits took 18661.043 seconds (5 hours, 11 minutes), all the digits printed out, but the visualization caught a <code>SEGFAULT</code>. Seriously, matplotlib? Anyway, a quick copy and paste of the digits saved the viz!</p></li></ul><p>The Python script that does the work of generating both Pi and the grid are as follows:</p><script type=application/javascript src=https://gist.github.com/bbengfort/b5e1242cca38de13e98b.js></script><p>The Pi digits computation uses the <code>decimal.Decimal</code> data structure in Python as well as setting a context to ensure that we lose no information by overflowing a float or a double precision data type. This code isn&rsquo;t my own, see the Stack Overflow link in the comment for more on it.</p><p>The visualization is done using the <code>matshow</code> function in matplotlib, which I&rsquo;ve used in the past to visualize <a href=https://github.com/bbengfort/cellular-automata>cellular automata</a> and even <a href=https://youtu.be/KGL2fJcnXDE>animate them</a> with matplotlib. It simply assigns a color from the color map to each digit and fills in the appropriate square. I don&rsquo;t like the color map — but I didn&rsquo;t take the time to put together a categorical colormap with a better scheme (sorry).</p><h2 id=appendix-segfault>Appendix: <code>SEGFAULT</code><a hidden class=anchor aria-hidden=true href=#appendix-segfault>#</a></h2><p>So this happened after 5 hours of computing Pi:</p><p><img loading=lazy src=/images/2016-03-14-matplotlib-segfault.png alt="Python SEGFAULT during Pi visualization"></p><h2 id=appendix-compute-times>Appendix: Compute Times<a hidden class=anchor aria-hidden=true href=#appendix-compute-times>#</a></h2><p>Compute times were as follows:</p><table><thead><tr><th>digits</th><th>time (sec)</th><th>accuracy</th></tr></thead><tbody><tr><td>1024</td><td>16.052</td><td>TBD</td></tr><tr><td>5625</td><td>3053.405</td><td>TBD</td></tr><tr><td>10000</td><td>18661.043</td><td>TBD</td></tr></tbody></table></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://bbengfort.github.io>Libelli</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>