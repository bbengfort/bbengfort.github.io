<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The Bengfort Toolkit | Libelli</title><meta name=keywords content><meta name=description content="Programming life has finally caused me to give into something that I&rsquo;ve resisted for a while: the creation of a Bengfort Toolkit and specifically a benlib. This post is mostly a reminder that this toolkit now exists and that I spent valuable time creating it against my better judgement. And as a result, I should probably use it and update it.
I&rsquo;ve already written (whoops, I almost said “you&rsquo;ve already read” but I know no one reads this) posts about tools that I use frequently including [clock."><meta name=author content="Benjamin Bengfort"><link rel=canonical href=https://bbengfort.github.io/2016/03/toolkit/><link crossorigin=anonymous href=/assets/css/stylesheet.min.2d6dbfc6e0f8a1db1c9d082a76dc11d094328cf63f247bbc2421dfaa7f2bb170.css integrity="sha256-LW2/xuD4odscnQgqdtwR0JQyjPY/JHu8JCHfqn8rsXA=" rel="preload stylesheet" as=style><link rel=preload href=/icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bbengfort.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bbengfort.github.io/icon.png><link rel=icon type=image/png sizes=32x32 href=https://bbengfort.github.io/icon.png><link rel=apple-touch-icon href=https://bbengfort.github.io/apple-touch-icon-precomposed.png><link rel=mask-icon href=https://bbengfort.github.io/icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.110.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-8096804-11","auto"),ga("send","pageview"))</script><meta property="og:title" content="The Bengfort Toolkit"><meta property="og:description" content="Programming life has finally caused me to give into something that I&rsquo;ve resisted for a while: the creation of a Bengfort Toolkit and specifically a benlib. This post is mostly a reminder that this toolkit now exists and that I spent valuable time creating it against my better judgement. And as a result, I should probably use it and update it.
I&rsquo;ve already written (whoops, I almost said “you&rsquo;ve already read” but I know no one reads this) posts about tools that I use frequently including [clock."><meta property="og:type" content="article"><meta property="og:url" content="https://bbengfort.github.io/2016/03/toolkit/"><meta property="og:image" content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-03-07T13:32:14+00:00"><meta property="article:modified_time" content="2016-03-07T13:32:14+00:00"><meta property="og:site_name" content="Libelli"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="The Bengfort Toolkit"><meta name=twitter:description content="Programming life has finally caused me to give into something that I&rsquo;ve resisted for a while: the creation of a Bengfort Toolkit and specifically a benlib. This post is mostly a reminder that this toolkit now exists and that I spent valuable time creating it against my better judgement. And as a result, I should probably use it and update it.
I&rsquo;ve already written (whoops, I almost said “you&rsquo;ve already read” but I know no one reads this) posts about tools that I use frequently including [clock."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://bbengfort.github.io/posts/"},{"@type":"ListItem","position":3,"name":"The Bengfort Toolkit","item":"https://bbengfort.github.io/2016/03/toolkit/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Bengfort Toolkit","name":"The Bengfort Toolkit","description":"Programming life has finally caused me to give into something that I\u0026rsquo;ve resisted for a while: the creation of a Bengfort Toolkit and specifically a benlib. This post is mostly a reminder that this toolkit now exists and that I spent valuable time creating it against my better judgement. And as a result, I should probably use it and update it.\nI\u0026rsquo;ve already written (whoops, I almost said “you\u0026rsquo;ve already read” but I know no one reads this) posts about tools that I use frequently including [clock.","keywords":[],"articleBody":"Programming life has finally caused me to give into something that I’ve resisted for a while: the creation of a Bengfort Toolkit and specifically a benlib. This post is mostly a reminder that this toolkit now exists and that I spent valuable time creating it against my better judgement. And as a result, I should probably use it and update it.\nI’ve already written (whoops, I almost said “you’ve already read” but I know no one reads this) posts about tools that I use frequently including [clock.py]({% post_url 2016-01-12-codetime-and-clock %}) and [requires]({% post_url 2016-01-21-freezing-requirements %}). These things have been simply Python scripts that I’ve put in ~/bin, which is part of my $PATH. These are too small or simple to require full blown repositories and PyPI listings on their own merit. Plus, I honestly believe that I’m the only one that uses them.\nDependencies are the problem though. For example, clock.py requires python-dateutil. This has resulted in my pretty much installing the dependent packages in every single one of my repositories. You may have noticed and removed extra dependencies on a pull request. However, I could live with that until …\nI needed gitpython for another quick script to modify the ID line of my codebase. Finally, I couldn’t just stick the dependency in all of my projects, I needed management. Also this third script put me over the top on managing all the stuff that I have going on. The toolkit was created.\nI’m excited because now I can pip install bengfort-toolkit anywhere I go, including on remote machines. But I’m still a little bit weary of having to maintain this toolkit. Particularly when stuff like this happens:\nimport sys import fileinput def comment_file(path): \"\"\" Comments out a Python file so that it can't be imported. \"\"\" for line in fileinput.input(path, inplace=True): if not line.startswith(\"#\"): line = \"# \" + line sys.stdout.write(line) Do you know what this does (I mean other than the obvious of printing out a python code that is commented out)? It literally modifies the file in place by moving the original file to a “.bak” extension, reading it, then hooking stdout up to the original file descriptor for writing. The module will then remove the “.bak” if it successfully completes.\nMind. Blown. Unix programmers, am I right?\nAlso, seriously?\nPreviously:\nimport os import shutil import tempfile def comment_file(path): \"\"\" Writes commented file to a temporary file. Then moves the temp file to original location. \"\"\" with open(path, 'r') as f: o, tmp = tempfile.mkstemp() for line in f.readlines(): if not line.startswith('#'): line = \"# \" + line o.write(line) shutil.copy(tmp, path) os.remove(tmp) And the conflict is that I’m not sure what I prefer. When I open source stuff and expect other folks to use it, I feel confident that stuff like this can be resolved by general consensus. If others who use open source tools decide that one method is less secure than the other, they will update it. Bengfort Toolkit has none of these safe guards. But hopefully the toolkit will help me manage my own development workflow.\n","wordCount":"513","inLanguage":"en","datePublished":"2016-03-07T13:32:14Z","dateModified":"2016-03-07T13:32:14Z","author":{"@type":"Person","name":"Benjamin Bengfort"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bbengfort.github.io/2016/03/toolkit/"},"publisher":{"@type":"Organization","name":"Libelli","logo":{"@type":"ImageObject","url":"https://bbengfort.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://bbengfort.github.io accesskey=h title="Libelli (Alt + H)"><img src=/icon.png alt=logo aria-label=logo height=35>Libelli</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://bbengfort.github.io/archive/ title=archive><span>archive</span></a></li><li><a href=https://bbengfort.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bbengfort.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://bbengfort.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>The Bengfort Toolkit</h1><div class=post-meta>March 7, 2016&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Benjamin Bengfort</div></header><div class=post-content><p>Programming life has finally caused me to give into something that I&rsquo;ve resisted for a while: the creation of a <a href=https://github.com/bbengfort/toolkit>Bengfort Toolkit</a> and specifically a <code>benlib</code>. This post is mostly a reminder that this toolkit now exists and that I spent valuable time creating it against my better judgement. And as a result, I should probably use it and update it.</p><p>I&rsquo;ve already written (whoops, I almost said “you&rsquo;ve already read” but I know no one reads this) posts about tools that I use frequently including [clock.py]({% post_url 2016-01-12-codetime-and-clock %}) and [requires]({% post_url 2016-01-21-freezing-requirements %}). These things have been simply Python scripts that I&rsquo;ve put in <code>~/bin</code>, which is part of my <code>$PATH</code>. These are too small or simple to require full blown repositories and PyPI listings on their own merit. Plus, I honestly believe that I&rsquo;m the only one that uses them.</p><p>Dependencies are the problem though. For example, <code>clock.py</code> requires <code>python-dateutil</code>. This has resulted in my pretty much installing the dependent packages in <em>every single one of my repositories</em>. <a href=https://github.com/bbengfort/confire/pull/4/files>You may have noticed</a> and removed extra dependencies on a pull request. However, I could live with that until &mldr;</p><p>I needed <code>gitpython</code> for another quick script to modify the <code>ID</code> line of my codebase. Finally, I couldn&rsquo;t just stick the dependency in all of my projects, I needed management. Also this third script put me over the top on managing all the stuff that I have going on. The toolkit was created.</p><p>I&rsquo;m excited because now I can <code>pip install bengfort-toolkit</code> anywhere I go, including on remote machines. But I&rsquo;m still a little bit weary of having to maintain this toolkit. Particularly when stuff like this happens:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> fileinput
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>comment_file</span>(path):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Comments out a Python file so that it can&#39;t be imported.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> fileinput<span style=color:#f92672>.</span>input(path, inplace<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#34;#&#34;</span>):
</span></span><span style=display:flex><span>            line <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;# &#34;</span> <span style=color:#f92672>+</span> line
</span></span><span style=display:flex><span>        sys<span style=color:#f92672>.</span>stdout<span style=color:#f92672>.</span>write(line)
</span></span></code></pre></div><p>Do you know what this does (I mean other than the obvious of printing out a python code that is commented out)? It literally modifies the file <em>in place</em> by moving the original file to a &ldquo;.bak&rdquo; extension, reading it, then hooking <code>stdout</code> up to the original file descriptor for writing. The module will then remove the &ldquo;.bak&rdquo; if it successfully completes.</p><p>Mind. Blown. Unix programmers, am I right?</p><p>Also, seriously?</p><p>Previously:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> shutil
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> tempfile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>comment_file</span>(path):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Writes commented file to a temporary file.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Then moves the temp file to original location.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(path, <span style=color:#e6db74>&#39;r&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        o, tmp <span style=color:#f92672>=</span> tempfile<span style=color:#f92672>.</span>mkstemp()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> f<span style=color:#f92672>.</span>readlines():
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#39;#&#39;</span>):
</span></span><span style=display:flex><span>                line <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;# &#34;</span> <span style=color:#f92672>+</span> line
</span></span><span style=display:flex><span>            o<span style=color:#f92672>.</span>write(line)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    shutil<span style=color:#f92672>.</span>copy(tmp, path)
</span></span><span style=display:flex><span>    os<span style=color:#f92672>.</span>remove(tmp)
</span></span></code></pre></div><p>And the conflict is that I&rsquo;m not sure what I prefer. When I open source stuff and expect other folks to use it, I feel confident that stuff like this can be resolved by general consensus. If others who use open source tools decide that one method is less secure than the other, they will update it. Bengfort Toolkit has none of these safe guards. But hopefully the toolkit will help me manage my own development workflow.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://bbengfort.github.io>Libelli</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>