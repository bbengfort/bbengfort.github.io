<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Color Map Utility | Libelli</title><meta name=keywords content><meta name=description content="Many of us are spoiled by the use of matplotlib&rsquo;s colormaps which allow you to specify a string or object name of a color map (e.g. Blues) then simply pass in a range of nearly continuous values which are spread along the color map. However, using these color maps for categorical or discrete values (like the colors of nodes) can pose challenges as the colors may not be distinct enough for the representation you&rsquo;re looking for."><meta name=author content="Benjamin Bengfort"><link rel=canonical href=https://bbengfort.github.io/2016/07/color-mapper/><link crossorigin=anonymous href=/assets/css/stylesheet.min.d0c0348c2d0cff14148d0e347258519d8df2ce53ce5ac32c7bd9a549182cb8ae.css integrity="sha256-0MA0jC0M/xQUjQ40clhRnY3yzlPOWsMse9mlSRgsuK4=" rel="preload stylesheet" as=style><link rel=preload href=/icon.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://bbengfort.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bbengfort.github.io/icon.png><link rel=icon type=image/png sizes=32x32 href=https://bbengfort.github.io/icon.png><link rel=apple-touch-icon href=https://bbengfort.github.io/apple-touch-icon-precomposed.png><link rel=mask-icon href=https://bbengfort.github.io/icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.0"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-8096804-11','auto');ga('send','pageview');}</script><meta property="og:title" content="Color Map Utility"><meta property="og:description" content="Many of us are spoiled by the use of matplotlib&rsquo;s colormaps which allow you to specify a string or object name of a color map (e.g. Blues) then simply pass in a range of nearly continuous values which are spread along the color map. However, using these color maps for categorical or discrete values (like the colors of nodes) can pose challenges as the colors may not be distinct enough for the representation you&rsquo;re looking for."><meta property="og:type" content="article"><meta property="og:url" content="https://bbengfort.github.io/2016/07/color-mapper/"><meta property="og:image" content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-07-15T16:28:11+00:00"><meta property="article:modified_time" content="2016-07-15T16:28:11+00:00"><meta property="og:site_name" content="Libelli"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bbengfort.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Color Map Utility"><meta name=twitter:description content="Many of us are spoiled by the use of matplotlib&rsquo;s colormaps which allow you to specify a string or object name of a color map (e.g. Blues) then simply pass in a range of nearly continuous values which are spread along the color map. However, using these color maps for categorical or discrete values (like the colors of nodes) can pose challenges as the colors may not be distinct enough for the representation you&rsquo;re looking for."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://bbengfort.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Color Map Utility","item":"https://bbengfort.github.io/2016/07/color-mapper/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Color Map Utility","name":"Color Map Utility","description":"Many of us are spoiled by the use of matplotlib\u0026rsquo;s colormaps which allow you to specify a string or object name of a color map (e.g. Blues) then simply pass in a range of nearly continuous values which are spread along the color map. However, using these color maps for categorical or discrete values (like the colors of nodes) can pose challenges as the colors may not be distinct enough for the representation you\u0026rsquo;re looking for.","keywords":[],"articleBody":"Many of us are spoiled by the use of matplotlib’s colormaps which allow you to specify a string or object name of a color map (e.g. Blues) then simply pass in a range of nearly continuous values which are spread along the color map. However, using these color maps for categorical or discrete values (like the colors of nodes) can pose challenges as the colors may not be distinct enough for the representation you’re looking for.\nColor is a very interesting topic, and I’m very partial to the work of Cynthia Brewer who suggests color scales for maps in particular that are understandable even by those who are color blind. D3 makes very heavy use of the Brewer palettes and provides Every ColorBrewer Scale as a JSON file. Unfortunately Python doesn’t natively have ColorBrewer in any of it’s projects (with the notable exception of seaborn).\nXKCD also did a color survey and Nathan Yao also has a lot to say about color on Flowing Data. Color is hugely important, and we shouldn’t just be forced to stick with the status quo. We should make things with awesome colors. I like to use tools like Paletton and Color Lovers to get unique palettes for my projects.\nSo you need something like the colormap in order to actually use these things. Therefore, for descrete values, I give you the ColorMap:\n So how do you use this tool? First you instantiate the object with either a list of colors or one of the names I provided in the script (and expand your script with your own names!). You then have a callable object that you can get the color for any hashable object. The ColorMap retains the color information and raises an exception if you ask for more colors than you have in the map.\n cmap = Colors('flatui')  cmap('A') #9b59b6  cmap('B') #3498db  cmap('A') #9b59b6 You can then use this tool in Graph Tool graphs or other utilities. For example, here is some standard graph tool code that I use to visualize graphs:\nimport graph_tool.all as gt # Draw the vertices with labels using their name property # and their size according to their degree. vlabel = G.vp['name'] vsize = G.degree_property_map(\"in\") vsize = gt.prop_to_size(vsize, ma=60, mi=20) # Set the vertex color using the color map and the flatui scheme. vcolor = G.new_vertex_property('string') vcmap = ColorMap('flatui', shuffle=False) # Add the color from the 'type' property of the vertex. for vertex in G.vertices(): vcolor[vertex] = vcmap(G.vp['type'][vertex]) # Set the edge color using the set1 colorbrewer scale ecolor = G.new_edge_property('string') ecmap = ColorMap('set1', shuffle=False) # Add the color from the 'label' property of the edge. for edge in G.edges(): ecolor[edge] = ecmap(G.ep['label'][edge]) # Label the edge and size it according to the norm and weight elabel = G.ep['label'] esize = G.ep['norm'] esize = gt.prop_to_size(esize, mi=.1, ma=3) eweight = G.ep['weight'] # Draw the graph! gt.graph_draw( G, output_size=(1200,1200), output=os.path.join(FIGURES, name), vertex_text=vlabel, vertex_size=vsize, vertex_font_weight=1, vertex_pen_width=1.3, vertex_fill_color=vcolor, edge_pen_width=esize, edge_color=ecolor, edge_text=elabel ) And there you have it, put colors everywhere.\n","wordCount":"502","inLanguage":"en","datePublished":"2016-07-15T16:28:11Z","dateModified":"2016-07-15T16:28:11Z","author":{"@type":"Person","name":"Benjamin Bengfort"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bbengfort.github.io/2016/07/color-mapper/"},"publisher":{"@type":"Organization","name":"Libelli","logo":{"@type":"ImageObject","url":"https://bbengfort.github.io/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: #1d1e20;--entry: #2e2e33;--primary: rgba(255, 255, 255, 0.84);--secondary: rgba(255, 255, 255, 0.56);--tertiary: rgba(255, 255, 255, 0.16);--content: rgba(255, 255, 255, 0.74);--hljs-bg: #2e2e33;--code-bg: #37383e;--border: #333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://bbengfort.github.io accesskey=h title="Libelli (Alt + H)"><img src=/icon.png alt=logo aria-label=logo height=35>Libelli</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://bbengfort.github.io/archive/ title=archive><span>archive</span></a></li><li><a href=https://bbengfort.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bbengfort.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://bbengfort.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Color Map Utility</h1><div class=post-meta>July 15, 2016&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Benjamin Bengfort</div></header><div class=post-content><p>Many of us are spoiled by the use of matplotlib&rsquo;s <a href=http://matplotlib.org/examples/color/colormaps_reference.html>colormaps</a> which allow you to specify a string or object name of a color map (e.g. <code>Blues</code>) then simply pass in a range of nearly continuous values which are spread along the color map. However, using these color maps for categorical or discrete values (like the colors of nodes) can pose challenges as the colors may not be distinct enough for the representation you&rsquo;re looking for.</p><p>Color is a very interesting topic, and I&rsquo;m very partial to the work of <a href=http://colorbrewer2.org/>Cynthia Brewer</a> who suggests color scales for maps in particular that are understandable even by those who are color blind. D3 makes very heavy use of the Brewer palettes and provides <a href=https://bl.ocks.org/mbostock/5577023>Every ColorBrewer Scale</a> as a JSON file. Unfortunately Python doesn&rsquo;t natively have ColorBrewer in any of it&rsquo;s projects (with the notable exception of <a href=https://stanford.edu/~mwaskom/software/seaborn/>seaborn</a>).</p><p>XKCD also did a <a href=https://blog.xkcd.com/2010/05/03/color-survey-results/>color survey</a> and Nathan Yao also has a lot to say about <a href=https://flowingdata.com/tag/color/>color on Flowing Data</a>. Color is hugely important, and we shouldn&rsquo;t just be forced to stick with the status quo. We should make things with awesome colors. I like to use tools like <a href=http://paletton.com/>Paletton</a> and <a href=http://www.colourlovers.com/palettes>Color Lovers</a> to get unique palettes for my projects.</p><p>So you need something like the colormap in order to actually use these things. Therefore, for descrete values, I give you the <code>ColorMap</code>:</p><script type=application/javascript src=https://gist.github.com/bbengfort/1973e6b017eefe39e041990451f9643a.js></script><p>So how do you use this tool? First you instantiate the object with either a list of colors or one of the names I provided in the script (and expand your script with your own names!). You then have a callable object that you can get the color for any hashable object. The <code>ColorMap</code> retains the color information and raises an exception if you ask for more colors than you have in the map.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> cmap <span style=color:#f92672>=</span> Colors(<span style=color:#e6db74>&#39;flatui&#39;</span>)
<span style=color:#f92672>&gt;&gt;&gt;</span> cmap(<span style=color:#e6db74>&#39;A&#39;</span>)
<span style=color:#75715e>#9b59b6</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cmap(<span style=color:#e6db74>&#39;B&#39;</span>)
<span style=color:#75715e>#3498db</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cmap(<span style=color:#e6db74>&#39;A&#39;</span>)
<span style=color:#75715e>#9b59b6</span>
</code></pre></div><p>You can then use this tool in Graph Tool graphs or other utilities. For example, here is some standard graph tool code that I use to visualize graphs:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> graph_tool.all <span style=color:#f92672>as</span> gt

<span style=color:#75715e># Draw the vertices with labels using their name property</span>
<span style=color:#75715e># and their size according to their degree.</span>
vlabel  <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>vp[<span style=color:#e6db74>&#39;name&#39;</span>]
vsize   <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>degree_property_map(<span style=color:#e6db74>&#34;in&#34;</span>)
vsize   <span style=color:#f92672>=</span> gt<span style=color:#f92672>.</span>prop_to_size(vsize, ma<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span>, mi<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>)

<span style=color:#75715e># Set the vertex color using the color map and the flatui scheme.</span>
vcolor  <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>new_vertex_property(<span style=color:#e6db74>&#39;string&#39;</span>)
vcmap   <span style=color:#f92672>=</span> ColorMap(<span style=color:#e6db74>&#39;flatui&#39;</span>, shuffle<span style=color:#f92672>=</span>False)

<span style=color:#75715e># Add the color from the &#39;type&#39; property of the vertex.</span>
<span style=color:#66d9ef>for</span> vertex <span style=color:#f92672>in</span> G<span style=color:#f92672>.</span>vertices():
    vcolor[vertex] <span style=color:#f92672>=</span> vcmap(G<span style=color:#f92672>.</span>vp[<span style=color:#e6db74>&#39;type&#39;</span>][vertex])

<span style=color:#75715e># Set the edge color using the set1 colorbrewer scale</span>
ecolor  <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>new_edge_property(<span style=color:#e6db74>&#39;string&#39;</span>)
ecmap   <span style=color:#f92672>=</span> ColorMap(<span style=color:#e6db74>&#39;set1&#39;</span>, shuffle<span style=color:#f92672>=</span>False)

<span style=color:#75715e># Add the color from the &#39;label&#39; property of the edge.</span>
<span style=color:#66d9ef>for</span> edge <span style=color:#f92672>in</span> G<span style=color:#f92672>.</span>edges():
    ecolor[edge] <span style=color:#f92672>=</span> ecmap(G<span style=color:#f92672>.</span>ep[<span style=color:#e6db74>&#39;label&#39;</span>][edge])

<span style=color:#75715e># Label the edge and size it according to the norm and weight</span>
elabel  <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>ep[<span style=color:#e6db74>&#39;label&#39;</span>]
esize   <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>ep[<span style=color:#e6db74>&#39;norm&#39;</span>]
esize   <span style=color:#f92672>=</span> gt<span style=color:#f92672>.</span>prop_to_size(esize, mi<span style=color:#f92672>=.</span><span style=color:#ae81ff>1</span>, ma<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>)
eweight <span style=color:#f92672>=</span> G<span style=color:#f92672>.</span>ep[<span style=color:#e6db74>&#39;weight&#39;</span>]

<span style=color:#75715e># Draw the graph!</span>
gt<span style=color:#f92672>.</span>graph_draw(
    G, output_size<span style=color:#f92672>=</span>(<span style=color:#ae81ff>1200</span>,<span style=color:#ae81ff>1200</span>), output<span style=color:#f92672>=</span>os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(FIGURES, name),
    vertex_text<span style=color:#f92672>=</span>vlabel, vertex_size<span style=color:#f92672>=</span>vsize, vertex_font_weight<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>,
    vertex_pen_width<span style=color:#f92672>=</span><span style=color:#ae81ff>1.3</span>, vertex_fill_color<span style=color:#f92672>=</span>vcolor,
    edge_pen_width<span style=color:#f92672>=</span>esize, edge_color<span style=color:#f92672>=</span>ecolor, edge_text<span style=color:#f92672>=</span>elabel
)
</code></pre></div><p>And there you have it, put colors everywhere.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://bbengfort.github.io>Libelli</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu')
menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>